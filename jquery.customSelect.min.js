/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-04-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
!function(e){"use strict";e.fn.extend({customSelect:function(t){if("undefined"==typeof document.body.style.maxHeight)return this;var s={customClass:"customSelect",mapClass:!0,mapStyle:!0},t=e.extend(s,t),n=t.customClass,a=function(t,s){var n=t.find(":selected"),a=s.children(":first"),i=n.html()||"&nbsp;";1==s.hasClass(l("NoWrap"))?o(s,i):a.html(i),n.attr("disabled")?s.addClass(l("DisabledOption")):s.removeClass(l("DisabledOption")),setTimeout(function(){s.removeClass(l("Open")),e(document).off("mouseup.customSelect"),t.css({width:s.outerWidth()})},60)},o=function(e,t){var s=t.split(" "),n=t.split(""),a=e.find("."+l("Inner")),o=e.find("."+l("TestInner")),i=e.width(),c="...",r=t;if(o.html(t),o.width()>i){if(s.length>1)for(var u=s.length-1;u>=0;--u){r="";for(var d=0,m=u;m>d;++d)r+=0==d?s[d]:" "+s[d];if(o.html(r+c),o.width()<i){r+=c;break}}else for(var u=n.length-1;u>=0;--u){r="";for(var d=0,m=u;m>d;++d)r+=n[d];if(o.html(r+c),o.width()>i){r+=c;break}}a.html(r)}else a.html(t)},l=function(e){return n+e};return this.each(function(){var s=e(this),o=e("<span>2</span>").addClass(l("Inner")),i=e("<span>2</span>").addClass(l("TestInner")).html("..."),c=e("<span />");s.after(c.append(o)),s.after(c.append(i)),c.addClass(n),t.mapClass&&c.addClass(s.attr("class")),t.mapStyle&&c.attr("style",s.attr("style")),t.noWrap&&c.addClass(l("NoWrap")),s.addClass("hasCustomSelect").on("render.customSelect",function(){s.css("width","");var e=parseInt(s.outerWidth(),10)-(parseInt(c.outerWidth(),10)-parseInt(c.width(),10));c.css({display:"inline-block"});var t=c.outerHeight();s.attr("disabled")?c.addClass(l("Disabled")):c.removeClass(l("Disabled")),o.css({width:e,display:"inline-block"}),s.css({"-webkit-appearance":"menulist-button",width:c.width(),position:"absolute",opacity:0,height:t,fontSize:c.css("font-size")}),a(s,c)}).on("change.customSelect",function(){c.addClass(l("Changed")),a(s,c)}).on("keyup.customSelect",function(e){c.hasClass(l("Open"))?(13==e.which||27==e.which)&&a(s,c):(s.trigger("blur.customSelect"),s.trigger("focus.customSelect"))}).on("mousedown.customSelect",function(){c.removeClass(l("Changed"))}).on("mouseup.customSelect",function(t){c.hasClass(l("Open"))||(e("."+l("Open")).not(c).length>0&&"undefined"!=typeof InstallTrigger?s.trigger("focus.customSelect"):(c.addClass(l("Open")),t.stopPropagation(),e(document).one("mouseup.customSelect",function(t){t.target!=s.get(0)&&e.inArray(t.target,s.find("*").get())<0?s.trigger("blur.customSelect"):a(s,c)})))}).on("focus.customSelect",function(){c.removeClass(l("Changed")).addClass(l("Focus"))}).on("blur.customSelect",function(){c.removeClass(l("Focus")+" "+l("Open"))}).on("mouseenter.customSelect",function(){c.addClass(l("Hover"))}).on("mouseleave.customSelect",function(){c.removeClass(l("Hover"))}).trigger("render.customSelect")})}})}(jQuery);