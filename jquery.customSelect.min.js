/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-04-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
(function(a){a.fn.extend({customSelect:function(c){if(typeof document.body.style.maxHeight==="undefined"){return this}var f={customClass:"customSelect",mapClass:true,mapStyle:true},c=a.extend(f,c),e=c.customClass,g=function(i,l){var h=i.find(":selected"),k=l.children(":first"),j=h.html()||"&nbsp;";if(l.hasClass(b("NoWrap"))==true){d(l,j)}else{k.html(j)}if(h.attr("disabled")){l.addClass(b("DisabledOption"))}else{l.removeClass(b("DisabledOption"))}setTimeout(function(){l.removeClass(b("Open"));a(document).off("mouseup.customSelect");i.css({width:l.outerWidth()})},60)},d=function(k,n){var t=n.split(" "),r=n.split(""),q=k.find("."+b("Inner")),o=k.find("."+b("TestInner")),s=k.width(),h="...",u=n;o.html(n);if(o.width()>s){if(t.length>1){for(var m=t.length-1;m>=0;--m){u="";for(var l=0,p=m;l<p;++l){u=u+((l==0)?t[l]:" "+t[l])}o.html(u+h);if(o.width()>s){u=h;o.html("")}else{u=u+h;break}}}else{for(var m=r.length-1;m>=0;--m){u="";for(var l=0,p=m;l<p;++l){u=u+r[l]}o.html(u+h);if(o.width()>s){u=h;o.html("")}else{u=u+h;break}}}}q.html(u)},b=function(h){return e+h};return this.each(function(){var h=a(this),k=a("<span />").addClass(b("Inner")),i=a("<span />").addClass(b("TestInner")).html("..."),j=a("<span />");h.after(j.append(k));h.after(j.append(i));j.addClass(e);if(c.mapClass){j.addClass(h.attr("class"))}if(c.mapStyle){j.attr("style",h.attr("style"))}if(c.noWrap){j.addClass(b("NoWrap"))}h.addClass("hasCustomSelect").on("render.customSelect",function(){g(h,j);h.css("width","");var m=parseInt(h.outerWidth(),10)-(parseInt(j.outerWidth(),10)-parseInt(j.width(),10));j.css({display:"inline-block"});var l=j.outerHeight();if(h.attr("disabled")){j.addClass(b("Disabled"))}else{j.removeClass(b("Disabled"))}k.css({width:m,display:"inline-block"});h.css({"-webkit-appearance":"menulist-button",width:j.outerWidth(),position:"absolute",opacity:0,height:l,fontSize:j.css("font-size")})}).on("change.customSelect",function(){j.addClass(b("Changed"));g(h,j)}).on("keyup.customSelect",function(l){if(!j.hasClass(b("Open"))){h.trigger("blur.customSelect");h.trigger("focus.customSelect")}else{if(l.which==13||l.which==27){g(h,j)}}}).on("mousedown.customSelect",function(){j.removeClass(b("Changed"))}).on("mouseup.customSelect",function(l){if(!j.hasClass(b("Open"))){if(a("."+b("Open")).not(j).length>0&&typeof InstallTrigger!=="undefined"){h.trigger("focus.customSelect")}else{j.addClass(b("Open"));l.stopPropagation();a(document).one("mouseup.customSelect",function(m){if(m.target!=h.get(0)&&a.inArray(m.target,h.find("*").get())<0){h.trigger("blur.customSelect")}else{g(h,j)}})}}}).on("focus.customSelect",function(){j.removeClass(b("Changed")).addClass(b("Focus"))}).on("blur.customSelect",function(){j.removeClass(b("Focus")+" "+b("Open"))}).on("mouseenter.customSelect",function(){j.addClass(b("Hover"))}).on("mouseleave.customSelect",function(){j.removeClass(b("Hover"))}).trigger("render.customSelect")})}})})(jQuery);